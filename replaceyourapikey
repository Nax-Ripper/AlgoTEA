const algosdk = require('algosdk');

const algodToken = 'your-api-key';
const algodServer = 'https://testnet-algorand.api.purestake.io/ps2';
const port = '';

const algodClient = new algosdk.Algodv2(algodToken, algodServer, port);

document.getElementById('payment-form').addEventListener('submit', async (event) => {
    event.preventDefault();

    const recipientAddress = document.getElementById('recipient-address').value;
    const amount = parseFloat(document.getElementById('amount').value);

    const params = await algodClient.getTransactionParams().do();
    const sender = 'your-sender-address'; // Replace with your sender address

    const txn = {
        from: sender,
        to: recipientAddress,
        fee: params.fee,
        amount: algosdk.algosToMicroalgos(amount),
        firstRound: params.lastRound,
        lastRound: params.lastRound + 1000,
        genesisID: params.genesisID,
        genesisHash: params.genesisHash,
        note: algosdk.encodeObj('Payment from your app'),
    };

    try {
        const signedTxn = algosdk.signTransaction(txn, 'your-sender-private-key');
        const txId = await algodClient.sendRawTransaction(signedTxn.blob).do();
        document.getElementById('payment-status').textContent = `Payment successful! Transaction ID: ${txId}`;
    } catch (error) {
        document.getElementById('payment-status').textContent = `Payment failed: ${error}`;
    }
});
