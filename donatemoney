<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate Money Page</title>
</head>
<body>
    <h1>Donate Money to Our Cause</h1>
    <p>Please enter the amount you'd like to donate:</p>
    <input type="number" id="donationAmount" placeholder="Enter donation amount in ALGO">
    <button onclick="donate()">Donate</button>
    
    <script src="https://cdn.jsdelivr.net/npm/algosdk@1.10.0"></script>
    <script>
        // Algorand settings
        const algosdk = window.algosdk;
        const server = "https://testnet-algorand.api.purestake.io/ps2";
        const token = {
            "X-API-Key": "YOUR_PURESTAKE_API_KEY", // Replace with your PureStake API key
        };
        const algodClient = new algosdk.Algodv2(token, server);

        // Replace with your Algorand wallet address where you want to receive donations
        const recipientAddress = "YOUR_RECIPIENT_ADDRESS";

        function donate() {
            const amount = document.getElementById("donationAmount").value;
            if (isNaN(amount) || amount <= 0) {
                alert("Please enter a valid donation amount.");
                return;
            }

            const algosToSend = Math.floor(amount * 1000000); // Convert ALGO to microALGO

            // Construct the transaction
            (async () => {
                try {
                    const params = await algodClient.getTransactionParams().do();
                    const sender = algosdk.generateAccount();
                    const txn = algosdk.makePaymentTxnWithSuggestedParamsFromObject({
                        from: sender.addr,
                        to: recipientAddress,
                        amount: algosToSend,
                        suggestedParams: params,
                    });

                    // Sign the transaction
                    const signedTxn = algosdk.signTransaction(txn, sender.sk);

                    // Submit the transaction to the Algorand network
                    const txId = await algodClient.sendRawTransaction(signedTxn.blob).do();
                    alert(`Donation successful! Transaction ID: ${txId}`);
                } catch (error) {
                    console.error(error);
                    alert("Donation failed. Please try again later.");
                }
            })();
        }
    </script>
</body>
</html>
